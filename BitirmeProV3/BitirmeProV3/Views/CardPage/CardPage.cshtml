@using BitirmeProV3.Models.Entity;
@model BitirmeProV3.Models.CardPageModel
@{
    ViewBag.Title = "CardPage";
    Layout = "~/Views/Shared/_MainLayout.cshtml";
}

<link rel="stylesheet" href="~/Content/Css/style/CardPage.css">
<div class="container" style="margin-top: 100px;">
    <div class="row">
        <div class="col-lg-4 ">
            <div class="row d-flex justify-content-start bg-light rounded border p-2">
                <div class="justify-content-start col-2">
                    <img src="@Model.Card.TBL_Kullanici.TBL_KullaniciOzellik.ProfilResmi" alt="" class="rounded-circle d-flex justify-content-end"
                         style="width: 50px; height: 50px;">
                </div>
                <div class="d-inline-block ml-3" style="height: 36px;">
                    <div>
                        <a class="text-dark d-block font-weight-bold" href="@Url.Action("Profil","Profil",new { kullaniciAdi = Model.Card.TBL_Kullanici.TBL_KullaniciOzellik.KullaniciAdi })" style="font-size:14px">@Model.Card.TBL_Kullanici.TBL_KullaniciOzellik.KullaniciAdi</a>
                    </div>
                    <div>
                        <p style="font-size:12px">@Model.Card.TBL_Kullanici.TBL_KullaniciOzellik.Unvani</p>
                    </div>
                </div>
            </div>
            <div class="row bg-light rounded mt-2 border">
                <h5 class="px-3 py-3 w-100">@Model.Card.KartBaslik</h5>

                <div class=" px-5 text-justify mb-4">
                    @Html.Raw(Model.Card.KartAciklamasi)
                </div>


            </div>
            @using (Html.BeginForm("AddComment", "CardPage", new { username = User.Identity.Name, cardID = Model.Card.IndexKartID }, FormMethod.Post, null))
            {
                <div class="row bg-light rounded mt-2 mb-2 border p-3">
                    <label for="message">Birseyler Yaz</label>
                    @Html.TextAreaFor(i=>i.yorum.Comment,new {@class="boxsizingBorder rounded" ,name="" ,id="message" })
                    
                    <button type="submit" class="btn btn-primary ml-auto mt-3">Gonder</button>
                </div>
            }

        </div>
        <div class="col-lg-8">
            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">

                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img class="d-block w-100" src="@Model.Card.KartResim1" style="height: 400px;"
                             alt="First slide">
                    </div>
                    @if (Model.Card.KartResim2 != null)
                    {
                        <div class="carousel-item">
                            <img class="d-block w-100" src="@Model.Card.KartResim2" style="height: 400px;"
                                 alt="Second slide">
                        </div>
                    }
                    @if (Model.Card.KartResim3 != null)
                    {
                        <div class="carousel-item">
                            <img class="d-block w-100" src="@Model.Card.KartResim3" style="height: 400px;"
                                 alt="Third slide">
                        </div>
                    }

                </div>
                <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                </a>
            </div>
            <div class="mt-carousel">
                <ol class="carousel-indicators ">
                    <li data-target="#carouselExampleIndicators" data-slide-to="0" class="carousel-li active w-h-100">
                        <img class="d-block rounded w-h-100" src="@Model.Card.KartResim1">

                    </li>
                    @if (Model.Card.KartResim2 != null)
                    {
                        <li data-target="#carouselExampleIndicators" data-slide-to="1" class="w-h-100">
                            <img class="d-block rounded w-h-100 carousel-li" src="@Model.Card.KartResim2">
                        </li>
                    }

                    @if (Model.Card.KartResim3 != null)
                    {
                        <li data-target="#carouselExampleIndicators" data-slide-to="2" class="w-h-100">
                            <img class="d-block rounded w-h-100 carousel-li" src="@Model.Card.KartResim3">
                        </li>
                    }

                </ol>
            </div>

            <div class="col-md-12">
                @foreach (var item in Model.yorumlar.AsEnumerable().Reverse().ToList())
                {
                <div class="media border rounded mt-2 p-3">
                    <img src="@item.kullanici.TBL_KullaniciOzellik.ProfilResmi" class="mr-3 mt-3 rounded-circle"
                         style="width:60px; height:60px;">
                    <div class="media-body">
                        <h5>
                            <a href="@Url.Action("Profil","Profil",new { kullaniciAdi = item.kullanici.TBL_KullaniciOzellik.KullaniciAdi })">@item.kullanici.TBL_KullaniciOzellik.KullaniciAdi</a>
                            <small><i>@item.yorum.Tarih</i></small>
                        </h5>
                        <p class="media-text rounded p-3 bg-light">
                            @item.yorum.Comment
                        </p>

                        @if (item.kullanici.TBL_KullaniciOzellik.KullaniciAdi == User.Identity.Name)
                        {
                            <div class="d-flex flex-row-reverse"><a href='@Url.Action("CommentDelete","CardPage",new {yorumId=item.yorum.CardCommentID,id=Model.Card.IndexKartID})'><i class="fa fa-trash"></i></a></div>
                        }
                    </div>
                </div>
                }
                

            </div>
        </div>
    </div>
</div>

